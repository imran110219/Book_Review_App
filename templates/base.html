{% load staticfiles %}
{% load static %}
<!--DOCTYPE html-->
<html>
<head>
  <title>{% block head_title %}Book Review{% endblock head_title %}</title>

  {#  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"#}
  {#        integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">#}
  <link rel='stylesheet' type="" href='{% static "css/bootstrap.min.css" %}'/>
  <link rel='stylesheet' type="" href='{% static "css/base.css" %}'/>
  <link rel='stylesheet' type="" href='{% static "css/custom.css" %}'/>
  <link rel="stylesheet" href="{% static 'star-ratings/css/star-ratings.css' %}"/>
</head>
<body>

<nav class="navbar navbar-default">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
              data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href='{% url "books:book" %}'>Book Review</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li class="active"><a href='{% url "accounts:home" %}'>Home <span class="sr-only">(current)</span></a></li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
             aria-expanded="false">Dropdown <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href='{% url "books:book" %}'>Book</a></li>
            <li><a href='{% url "categories:category" %}'>Category</a></li>
            <li><a href='{% url "authors:author" %}'>Author</a></li>
            <li><a href='{% url "publications:publication" %}'>Publication</a></li>
          </ul>
        </li>
      </ul>

      <form class="navbar-form navbar-left" id="searchform" action="{% url 'books:book' %}" method="get"
            accept-charset="utf-8">
        <div class="form-group">
          <input type="text" class="form-control" name="q" placeholder="Search Books">
        </div>
        <button type="submit" class="btn btn-default">Go!</button>
      </form>

      <ul class="nav navbar-nav navbar-right">
        {% if not request.user.is_authenticated %}
          <li><a href='{% url "register" %}'>Register</a></li>
          <li><a href='{% url "login" %}'>Login</a></li>
        {% else %}
          <li><a href='#'>{{ user.username }}</a></li>
          <li><a href='{% url "logout" %}'>Logout</a></li>
        {% endif %}
        {#        <li class="dropdown">#}
        {#          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"#}
        {#             aria-expanded="false">Dropdown <span class="caret"></span></a>#}
        {#          <ul class="dropdown-menu">#}
        {#            <li><a href="#">Action</a></li>#}
        {#            <li><a href="#">Another action</a></li>#}
        {#            <li><a href="#">Something else here</a></li>#}
        {#            <li role="separator" class="divider"></li>#}
        {#            <li><a href="#">Separated link</a></li>#}
        {#          </ul>#}
        {#        </li>#}
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>

<div class='container'>
  <div class='row'>
    {% block content %}{% endblock content %}
  </div>
</div>
{#<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>#}
{#<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"#}
{#        integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"#}
{#        crossorigin="anonymous"></script>#}

{#<script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>#}
<script type="text/javascript" src='{% static "js/jquery.min.js" %}'></script>
<script type="text/javascript" src='{% static "js/bootstrap.min.js" %}'></script>
<script type="text/javascript" src='{% static "js/bootbox.min.js" %}'></script>
<script type="text/javascript" src='{% static "js/custom.js" %}'></script>
<script type="text/javascript" src="{% static 'star-ratings/js/dist/star-ratings.js' %}"></script>

<script type="text/javascript">
    $(document).ready(function () {
        {#        $("#review-edit-btn").click(function () {#}
        {#            var revid = $(this).data('revid');#}
        {#            $("#review_" + revid).load("review_edit.html");#}
        {#        });#}
{##}
{#        $(document).on('click', '.edit', function () {#}
{#            $id = $(this).attr('name');#}
{#            window.location = "reviews/" + $id + "/edit/";#}
{#        });#}
{##}
{#        var id = $(this).attr('revid');#}
{#        alert(id);#}
{#        $("#review-delete-btn").click(function () {#}
{#            $id = $(this).attr('revid');#}
{#            alert($id);#}
{#            $.ajax({#}
{#                url: '/books/reviews/' + $id + '/delete/',#}
{#                type: 'POST',#}
{#                data: {#}
{#                    csrfmiddlewaretoken: $('input[name=csrfmiddlewaretoken]').val()#}
{#                },#}
{#                success: function (data) {#}
{#                    $(".review").html(data);#}
{#                    $(".review").hide();#}
{#                    alert("Deleted!");#}
{#                }#}
{#            });#}
{#        });#}

        {#        $("#review-delete-btn").on('click', function (event) {#}
        {#            event.preventDefault();#}
        {##}
        {#            // for referencing this later in this function#}
        {#            var _button = $(this);#}
        {#            var revid = $(this).data('revid');#}
        {##}
        {#            alert(revid);#}
        {##}
        {#            bootbox.confirm({#}
        {#                title: "Destroy planet?",#}
        {#                message: "Do you want to delete? This cannot be undone.",#}
        {#                buttons: {#}
        {#                    cancel: {#}
        {#                        label: '<i class="fa fa-times"></i> Cancel'#}
        {#                    },#}
        {#                    confirm: {#}
        {#                        label: '<i class="fa fa-check"></i> Confirm'#}
        {#                    }#}
        {#                },#}
        {#                callback: function (result) {#}
        {#                    // result will be a Boolean value#}
        {#                    if (result) {#}
        {#                        // this encodes the form data#}
        {#                        var data = _button.closest('form').serialize();#}
        {##}
        {#                        $.post('{% url "delete" pk=revid %}', data).done(function (response, status, jqxhr) {#}
        {#                            // status code 200 response#}
        {#                        })#}
        {#                            .fail(function (jqxhr, status, errorThrown) {#}
        {#                                // any other status code, including 30x (redirects)#}
        {#                            });#}
        {#                    }#}
        {#                }#}
        {#            });#}
        {#        });#}
    });
</script>

</body>
</html>
